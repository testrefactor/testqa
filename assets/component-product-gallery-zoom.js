"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _createSuper(r){var o=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(r);return _possibleConstructorReturn(this,o?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var r="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(t,e)})(e)}function _construct(e,t,r){return(_construct=_isNativeReflectConstruct()?Reflect.construct.bind():function(e,t,r){var o=[null];o.push.apply(o,t);t=new(Function.bind.apply(e,o));return r&&_setPrototypeOf(t,r.prototype),t}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _isNativeFunction(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}!function o(n,i,a){function s(t,e){if(!i[t]){if(!n[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}r=i[t]={exports:{}},n[t][0].call(r.exports,function(e){return s(n[t][1][e]||e)},r,r.exports,o,n,i,a)}return i[t].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,r){customElements.get("product-gallery-zoom")||customElements.define("product-gallery-zoom",function(){_inherits(t,_wrapNativeSuper(HTMLElement));var e=_createSuper(t);function t(){var i;return _classCallCheck(this,t),_defineProperty(_assertThisInitialized(i=e.call(this)),"initSlider",function(){var e;null!=(e=i.mainSlider)&&e.initialize(),document.removeEventListener("scroll",i.initSlider),document.removeEventListener("touchstart",i.initSlider),document.removeEventListener("mousemove",i.initSlider),document.removeEventListener("click",i.initSlider)}),_defineProperty(_assertThisInitialized(i),"sliderChangeHandler",function(e){i.zoomWrapper.forEach(function(e){e.setAttribute("data-zoom","0"),e.querySelector("img").style.transform=""}),i.zoomInButton.removeAttribute("disabled"),i.zoomOutButton.setAttribute("disabled","true"),i.progress.innerHTML="".concat(i.mainSlider.swiper.activeIndex+1,"/").concat(i.mainSlider.swiper.slides.length),i.mainSlider.swiper.allowTouchMove=!0,i.initTouchEvents()}),_defineProperty(_assertThisInitialized(i),"sliderCloser",function(){document.querySelector("body").style.overflowY="auto",i.classList.remove("js-active")}),_defineProperty(_assertThisInitialized(i),"scrollToSlide",function(e){i.classList.add("js-active"),document.querySelector("body").style.overflowY="hidden";e=parseInt(e.dataset.slide);i.mainSlider.swiper.slideTo(e,0),i.initTouchEvents()}),_defineProperty(_assertThisInitialized(i),"zoomInButtonClickHandler",function(){var e=i.querySelector(".js-product-gallery-zoom__cell.swiper-slide-active .js-product-gallery-zoom__container"),t=e.getAttribute("data-zoom");e.querySelector("img").style.transform="",i.startX=null,i.startY=null,i.positionX=0,i.positionY=0,"0"==t?(e.setAttribute("data-zoom","1"),e.addEventListener("dragstart",i.draggableZoomStart),e.addEventListener("drag",i.draggableZoomMove),e.addEventListener("dragend",i.draggableZoomEnd),i.zoomOutButton.removeAttribute("disabled"),i.mainSlider.swiper.allowTouchMove=!1):"1"===t&&(e.setAttribute("data-zoom","2"),i.zoomInButton.setAttribute("disabled","true"))}),_defineProperty(_assertThisInitialized(i),"zoomOutButtonClickHandler",function(){var e=i.querySelector(".js-product-gallery-zoom__cell.swiper-slide-active .js-product-gallery-zoom__container"),t=e.getAttribute("data-zoom");e.querySelector("img").style.transform="",i.startX=null,i.startY=null,i.positionX=0,i.positionY=0,"1"===t?(e.setAttribute("data-zoom","0"),e.removeEventListener("dragstart",i.draggableZoomStart),e.removeEventListener("drag",i.draggableZoomMove),e.removeEventListener("dragend",i.draggableZoomEnd),i.zoomOutButton.setAttribute("disabled","true"),i.mainSlider.swiper.allowTouchMove=!0):"2"===t&&(e.setAttribute("data-zoom","1"),i.zoomInButton.removeAttribute("disabled"))}),_defineProperty(_assertThisInitialized(i),"draggableZoomStart",function(e){i.startX=e.clientX,i.startY=e.clientY,e.dataTransfer.setDragImage(i.dragImg,i.startX,i.startY)}),_defineProperty(_assertThisInitialized(i),"draggableZoomMove",function(e){var t=e.target.closest(".js-product-gallery-zoom__container"),r=t.getAttribute("data-zoom"),t=t.querySelector("img"),o=i.positionX+(i.startX-e.clientX),e=i.positionY+(i.startY-e.clientY);o-i.positionX!==i.startX&&(t.style.transform="translate(".concat(-o,"px, ").concat(-e,"px) scale(").concat("1"==r?2:3,")"))}),_defineProperty(_assertThisInitialized(i),"draggableZoomEnd",function(e){var t=e.target.closest(".js-product-gallery-zoom__container"),r=t.getAttribute("data-zoom"),t=t.querySelector("img"),o=i.positionX+(i.startX-e.clientX),e=i.positionY+(i.startY-e.clientY);t.style.transform="translate(".concat(-o,"px, ").concat(-e,"px) scale(").concat("1"==r?2:3,")"),i.positionX=o,i.positionY=e}),_defineProperty(_assertThisInitialized(i),"initTouchEvents",function(){var e;i.imageElementScale=1,i.deltaX=0,i.deltaY=0,i.start={},i.allowMove=!0,i.slide=i.querySelector(".js-product-gallery-zoom__cell.swiper-slide-active"),i.imageContainer=null==(e=i.slide)?void 0:e.querySelector(".js-product-gallery-zoom__container"),i.image=null==(e=i.imageContainer)?void 0:e.querySelector("img"),null!=(e=i.image)&&e.addEventListener("touchstart",i.handleTouchStart),null!=(e=i.image)&&e.addEventListener("touchmove",i.handleTouchMove),null!=(e=i.image)&&e.addEventListener("touchend",i.handleTouchEnd)}),_defineProperty(_assertThisInitialized(i),"handleTouchStart",function(e){1===e.touches.length?(e.preventDefault(),i.start.x=e.touches[0].pageX,i.start.y=e.touches[0].pageY):2===e.touches.length&&(e.preventDefault(),i.start.x=(e.touches[0].pageX+e.touches[1].pageX)/2,i.start.y=(e.touches[0].pageY+e.touches[1].pageY)/2,i.start.distance=Math.hypot(e.touches[0].pageX-e.touches[1].pageX,e.touches[0].pageY-e.touches[1].pageY),i.start.scale=i.imageElementScale)}),_defineProperty(_assertThisInitialized(i),"handleTouchMove",function(e){var t,r,o,n;i.allowMove&&(1===e.touches.length?(e.preventDefault(),o=e.touches[0].pageX-i.start.x,t=e.touches[0].pageY-i.start.y,i.start.x=e.touches[0].pageX,i.start.y=e.touches[0].pageY,o=i.deltaX+o,t=i.deltaY+t,r=(i.image.clientWidth*i.imageElementScale-i.imageContainer.clientWidth)/2,n=(i.image.clientHeight*i.imageElementScale-i.imageContainer.clientHeight)/2,i.deltaX=Math.max(-r,Math.min(r,o)),i.deltaY=Math.max(-n,Math.min(n,t)),i.applyTransform()):2===e.touches.length&&(e.preventDefault(),r=e.scale||distance(e)/i.start.distance,i.imageElementScale=Math.min(Math.max(1,i.start.scale*r),4),1===i.imageElementScale&&(i.deltaX=0,i.deltaY=0),o=(i.image.clientWidth*i.imageElementScale-i.imageContainer.clientWidth)/2,n=(i.image.clientHeight*i.imageElementScale-i.imageContainer.clientHeight)/2,i.deltaX=Math.max(-o,Math.min(o,i.deltaX)),i.deltaY=Math.max(-n,Math.min(n,i.deltaY)),i.applyTransform()))}),_defineProperty(_assertThisInitialized(i),"applyTransform",function(){var e="translate3d(".concat(i.deltaX,"px, ").concat(i.deltaY,"px, 0) scale(").concat(i.imageElementScale,")");i.image.style.transform=e,i.image.style.WebkitTransform=e}),_defineProperty(_assertThisInitialized(i),"handleTouchEnd",function(e){i.allowMove=1!==e.touches.length}),i}return _createClass(t,[{key:"connectedCallback",value:function(){var t=this;this.dragImg=new Image,this.dragImg.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",this.mainSlider=this.querySelector(".js-product-gallery-zoom__wrapper"),this.zoomWrapper=this.querySelectorAll(".js-product-gallery-zoom__container"),this.buttonCloser=this.querySelector(".js-product-gallery-zoom__closer"),this.zoomInButton=this.querySelector(".js-product-gallery-zoom__zoom-button-in"),this.zoomOutButton=this.querySelector(".js-product-gallery-zoom__zoom-button-out"),this.progress=this.querySelector(".js-product-gallery-zoom__progress"),this.mainSlider.addEventListener("swiperslidechange",this.sliderChangeHandler),this.zoomInButton.addEventListener("click",this.zoomInButtonClickHandler),this.zoomOutButton.addEventListener("click",this.zoomOutButtonClickHandler),this.buttonCloser.addEventListener("click",this.sliderCloser),document.addEventListener("scroll",this.initSlider,{once:!0}),document.addEventListener("touchstart",this.initSlider,{once:!0}),document.addEventListener("mousemove",this.initSlider,{once:!0}),document.addEventListener("click",this.initSlider,{once:!0}),this.openZoomUnsubscriber=window.PubSub.subscribe("open-zoom",function(e){setTimeout(function(){t.scrollToSlide(e)},300)})}},{key:"disconnectedCallback",value:function(){var e,t=this;this.mainSlider.removeEventListener("swiperslidechange",this.sliderChangeHandler),this.zoomInButton.removeEventListener("click",this.zoomInButtonClickHandler),this.zoomOutButton.removeEventListener("click",this.zoomOutButtonClickHandler),this.buttonCloser.removeEventListener("click",this.sliderCloser),document.removeEventListener("scroll",this.initSlider),document.removeEventListener("touchstart",this.initSlider),document.removeEventListener("mousemove",this.initSlider),document.removeEventListener("click",this.initSlider),null!=(e=this.image)&&e.removeEventListener("touchstart",this.handleTouchStart),null!=(e=this.image)&&e.removeEventListener("touchmove",this.handleTouchMove),null!=(e=this.image)&&e.removeEventListener("touchend",this.handleTouchEnd),this.zoomWrapper.forEach(function(e){e.removeEventListener("dragstart",t.draggableZoomStart),e.removeEventListener("drag",t.draggableZoomMove),e.removeEventListener("dragend",t.draggableZoomEnd)}),this.openZoomUnsubscriber()}}]),t}())},{}]},{},[1]);